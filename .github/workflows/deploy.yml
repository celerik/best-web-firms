name: deploy

on: [push]

jobs:
  deploy_dev:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v2
      
    - name: Authenticate
      run: docker login docker.pkg.github.com -u equisoide -p ${{ secrets.GITHUB_TOKEN }}
      
    - name: Build dev image
      working-directory: ./source
      run: docker build -t docker.pkg.github.com/celerik/best-web-firms-react/bwfr:latest . -f dev.Dockerfile
      
    - name: Tag dev image
      working-directory: ./source
      run: docker tag bwfr docker.pkg.github.com/celerik/best-web-firms-react/bwfr:latest
